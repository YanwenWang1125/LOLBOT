# 🎵 Audio Files Storage

This directory contains all generated TTS (Text-to-Speech) audio files created by the LOLBOT system. These files are automatically generated from Chinese game analysis and played in Discord voice channels.

## 📁 File Structure

```
audio/
├── match_analysis_YYYYMMDD_HHMMSS.mp3    # Generated TTS audio files
└── README.md                              # This documentation
```

## 🎵 File Types

### **TTS Audio Files**
- **Format**: `match_analysis_YYYYMMDD_HHMMSS.mp3`
- **Content**: Chinese game analysis converted to speech
- **Generated by**: `services/voicv_tts.py`
- **Triggered by**: Game analysis workflows
- **Quality**: High-quality TTS audio optimized for Discord playback

## 🔄 Audio Generation Process

### **Generation Workflow**
1. **Analysis Creation** → Chinese analysis text generated
2. **TTS Processing** → Text converted to speech using VoicV API
3. **Audio Optimization** → Audio optimized for Discord playback
4. **File Storage** → MP3 file saved to audio directory
5. **Discord Playback** → Audio played in user's voice channel
6. **Cleanup** → Old audio files automatically removed

### **Technical Details**
- **Audio Format**: MP3 (optimized for Discord)
- **Sample Rate**: 22050 Hz (Discord compatible)
- **Bit Rate**: 128 kbps (balanced quality/size)
- **Duration**: Typically 30-120 seconds per analysis
- **Language**: Chinese (Simplified)

## 🎯 Audio Content

### **Analysis Content**
- **Game Performance**: KDA, CS, damage statistics
- **Match Summary**: Game duration, mode, outcome
- **Player Performance**: Individual performance highlights
- **Strategic Insights**: AI-generated strategic commentary
- **Encouragement**: Motivational and supportive commentary

### **Voice Characteristics**
- **Voice Selection**: Based on style configuration
- **Tone**: Professional, engaging, and supportive
- **Language**: Natural Chinese speech patterns
- **Emotion**: Appropriate emotional tone for gaming context

## 🔧 File Management

### **Automatic Management**
```python
# Audio file cleanup is handled automatically
from services.utils import cleanup_old_files

# Keep only 5 most recent audio files
cleanup_stats = cleanup_old_files(keep_count=5)
```

### **Manual Management**
```bash
# View file statistics
!files

# Check audio file location
!show_data_location
```

## 📊 File Statistics

### **Storage Information**
- **File Count**: Automatically maintained (max 5 files)
- **File Size**: Typically 500KB-2MB per audio file
- **Retention**: 5 most recent audio files kept
- **Cleanup**: Automatic old file removal

### **Performance Metrics**
- **Generation Time**: 3-8 seconds per audio file
- **Storage Efficiency**: MP3 compression for optimal size
- **Access Speed**: Fast file system access
- **Playback Quality**: High-quality audio for Discord

## 🎵 Audio Quality

### **Technical Specifications**
- **Format**: MP3
- **Sample Rate**: 22050 Hz
- **Bit Rate**: 128 kbps
- **Channels**: Mono (Discord optimized)
- **Duration**: 30-120 seconds typical

### **Quality Optimization**
- **Discord Compatibility**: Optimized for Discord voice channels
- **File Size**: Balanced quality and storage efficiency
- **Playback Speed**: Optimized for real-time playback
- **Audio Clarity**: Clear pronunciation and natural speech

## 🔄 Integration Points

### **TTS Generation**
```python
from services.voicv_tts import generate_tts_audio

# Generate audio from Chinese analysis
audio_file = generate_tts_audio(
    text=chinese_analysis,
    voice_id="default",
    output_path="audio/analysis.mp3"
)
```

### **Discord Playback**
```python
# Play audio in Discord voice channel
import discord

voice_channel = bot.get_channel(voice_channel_id)
vc = await voice_channel.connect()
audio_source = discord.FFmpegPCMAudio(audio_file)
vc.play(audio_source)
```

## 🎯 Use Cases

### **Real-time Game Analysis**
- **Automatic Playback**: Audio played immediately after game ends
- **Voice Channel Integration**: Seamless Discord integration
- **User Experience**: Hands-free analysis listening
- **Accessibility**: Audio format for users who prefer listening

### **Historical Analysis**
- **Audio Archive**: Historical audio files for reference
- **Performance Review**: Listen to past game analyses
- **Quality Assessment**: Review TTS quality over time
- **User Feedback**: Audio quality feedback and improvement

## 🔒 Data Security

### **Privacy Considerations**
- **Content**: Contains game analysis and performance data
- **Access Control**: Files stored locally on server
- **Retention Policy**: Automatic cleanup prevents data accumulation
- **User Data**: No personal information beyond game analysis

### **Data Protection**
- **File Permissions**: Proper file system permissions
- **Backup Strategy**: Regular cleanup prevents data loss
- **Access Logging**: File access can be monitored
- **Secure Storage**: Files stored in secure server environment

## 🧪 Testing and Validation

### **Audio Quality Testing**
```python
# Test audio file generation
from services.voicv_tts import generate_tts_audio

def test_audio_generation():
    test_text = "这是一个测试音频文件"
    audio_file = generate_tts_audio(test_text)
    
    # Validate file exists and is playable
    assert os.path.exists(audio_file)
    assert audio_file.endswith('.mp3')
```

### **Quality Assurance**
- **Audio Validation**: Verify MP3 file integrity
- **Content Quality**: Ensure clear pronunciation
- **Duration Check**: Validate appropriate length
- **Discord Compatibility**: Test Discord playback

## 📚 Integration Examples

### **Audio File Processing**
```python
import os
import glob

# Process all audio files
audio_dir = 'audio'
audio_files = glob.glob(os.path.join(audio_dir, '*.mp3'))

for audio_file in audio_files:
    # Process audio file
    file_size = os.path.getsize(audio_file)
    print(f"Audio file: {audio_file}, Size: {file_size} bytes")
```

### **Batch Audio Operations**
```python
# Clean up old audio files
def cleanup_audio_files(keep_count=5):
    audio_files = sorted(glob.glob('audio/*.mp3'), key=os.path.getmtime)
    
    if len(audio_files) > keep_count:
        files_to_remove = audio_files[:-keep_count]
        for file in files_to_remove:
            os.remove(file)
        return len(files_to_remove)
    return 0
```

## 🔄 Maintenance

### **Regular Maintenance**
- **File Cleanup**: Automatic old file removal
- **Storage Monitoring**: Check disk space usage
- **Audio Validation**: Verify file integrity
- **Performance Optimization**: Optimize file access

### **Troubleshooting**
- **File Corruption**: Check MP3 file validity
- **Missing Files**: Verify TTS generation
- **Permission Issues**: Check file system permissions
- **Storage Issues**: Monitor disk space

## 📈 Performance Optimization

### **Storage Optimization**
- **File Compression**: MP3 format for optimal size
- **Cleanup Strategy**: Keep only recent files
- **Access Patterns**: Optimize for sequential access
- **Memory Usage**: Efficient audio file handling

### **I/O Optimization**
- **File Caching**: Cache frequently accessed files
- **Batch Operations**: Process multiple files efficiently
- **Async I/O**: Non-blocking file operations
- **Error Handling**: Robust file operation handling

## 🎵 Audio Features

### **Voice Characteristics**
- **Natural Speech**: High-quality TTS with natural intonation
- **Chinese Language**: Optimized for Chinese pronunciation
- **Gaming Context**: Appropriate tone for gaming analysis
- **Emotional Range**: Supportive and encouraging tone

### **Technical Features**
- **Discord Integration**: Seamless voice channel playback
- **Real-time Generation**: Fast TTS processing
- **Quality Control**: Consistent audio quality
- **Error Handling**: Robust audio generation process

## 🔧 Configuration

### **Audio Settings**
```python
# Audio configuration
AUDIO_DIR = "audio"
AUDIO_FORMAT = "mp3"
AUDIO_QUALITY = "high"
KEEP_AUDIO_COUNT = 5
```

### **TTS Settings**
```python
# TTS configuration
VOICE_ID = "default"
LANGUAGE = "zh-CN"
SPEED = 1.0
PITCH = 1.0
```

---

*This directory contains the generated TTS audio files that provide the core audio experience of the LOLBOT system. All game analysis audio is stored here for playback in Discord voice channels.*
